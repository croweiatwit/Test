<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Affordability Calculator</title>
  <link rel="stylesheet" href="CSS/Gobal_Page.css" />
  <link rel="stylesheet" href="CSS/Menu_Bar.css" /> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/rangeslider.js/2.3.3/rangeslider.min.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/rangeslider.js/2.3.3/rangeslider.min.js"></script>
</head>

</head>

<body>

  <label for="menuToggle">
    <input type="checkbox" id="menuToggle">
    <div class="toggle">
      <span class="top_line common"></span>
      <span class="middle_line common"></span>
      <span class="bottom_line common"></span>
    </div>
  </label>

  <div class="Menu">
    <ul class="main-menu">
      <li>
                <label for="Dashboard">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                        fill="#3271a5">
                        <path
                            d="M520-600v-240h320v240H520ZM120-440v-400h320v400H120Zm400 320v-400h320v400H520Zm-400 0v-240h320v240H120Z" />
                    </svg>
                </label>

                <a href="Home_Page.html">Home</a>
            </li>
      <li>
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                    fill="#7bd05d">
                    <path
                        d="m136-240-56-56 296-298 160 160 208-206H640v-80h240v240h-80v-104L536-320 376-480 136-240Z" />
                </svg>
                <a href="Trending_Apartments_Page.html">Trending</a>
            </li>
      <li>
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                    fill="#Ff0000">
                    <path
                        d="M480-388q51-47 82.5-77.5T611-518q17-22 23-38.5t6-35.5q0-36-26-62t-62-26q-21 0-40.5 8.5T480-648q-12-15-31-23.5t-41-8.5q-36 0-62 26t-26 62q0 19 5.5 35t22.5 38q17 22 48 52.5t84 78.5ZM200-120v-640q0-33 23.5-56.5T280-840h400q33 0 56.5 23.5T760-760v640L480-240 200-120Z" />
                </svg>
                <a href="Saved_Page.html">Saved</a>

            </li>
                  <li>
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                    fill="#D2B48C">
                    <path
                        d="M80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm160-320h320v-80H240v80Zm0-120h480v-80H240v80Zm0-120h480v-80H240v80Z" />
                </svg>
                <a href="Messenger_Page.html" target="_top">Messages</a>



            </li>
      <li class="mobile-sublet-link"><a href="Sublet_Form.html">Add Sublet</a></li>
      <div class="dropdown">
        <a href="#" class="dropbtn">Explore</a>
        <div class="dropdown-content">
          <a href="Crime_Safety_Page.html">Crime / Safest Neighborhoods</a>
          <a href="Rent_Calculations.html">Rent Calculation</a>
        </div>
      </div>
      <!-- Add Sublet visible only on small screens -->
      
    <ul class="account-menu">
            
            <li>
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                    fill="#000000">
                    <path
                        d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm112-260q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Z" />
                </svg>
                <a href="Setting_Page.html">Settings</a>


            </li>
            <li>
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                    fill="#000000">
                    <path
                        d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v80h-80v-80H200v560h560v-80h80v80q0 33-23.5 56.5T760-120H200Zm480-160-56-56 103-104H360v-80h367L624-624l56-56 200 200-200 200Z" />
                </svg>
                <a href="Login_Page.html">Log Out</a>
            </li>
        </ul>
  </div>

  <!-- Top Strip -->
<div class="top-strip">
  <h2>
   <div class="main-logo" id="siteLogo"></div>



    Student APTs
  </h2>
</div>

<!-- Spacer so content below doesn't get hidden -->
<div style="height: 5px;"></div>

<hr>

</head>
<body>

  <div class="notification-box">
    <span class="notification-count"></span>
    <div class="notification-bell">
      <span class="bell-top"></span>
      <span class="bell-middle"></span>
      <span class="bell-bottom"></span>
      <span class="bell-rad"></span>
    </div>
  </div>

  <!-- Profile Dropdown -->
  <div class="profile-dropdown">
    <img src="Photos/Background_image.png" alt="Profile" class="profile-avatar" id="profileToggle">

    <div class="dropdown-card" id="profileMenu">
      <div class="profile-header">
        <img src="Photos/Background_image.png" alt="Avatar">
        <div>
          <div class="name" id="profileName">Loading...</div>
          <div class="email" id="profileEmail">Loading...</div>
        </div>
      </div>

<div class="theme-toggle">
          <button class="theme-btn active" data-theme="light" aria-label="Light Mode">
            <span class="icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                width="24px" fill="#e3e3e3">
                <path
                  d="M440-760v-160h80v160h-80Zm266 110-55-55 112-115 56 57-113 113Zm54 210v-80h160v80H760ZM440-40v-160h80v160h-80ZM254-652 140-763l57-56 113 113-56 54Zm508 512L651-255l54-54 114 110-57 59ZM40-440v-80h160v80H40Zm157 300-56-57 112-112 29 27 29 28-114 114Zm283-100q-100 0-170-70t-70-170q0-100 70-170t170-70q100 0 170 70t70 170q0 100-70 170t-170 70Zm0-80q66 0 113-47t47-113q0-66-47-113t-113-47q-66 0-113 47t-47 113q0 66 47 113t113 47Zm0-160Z" />
              </svg></span>
          </button>
          <button class="theme-btn" data-theme="dark" aria-label="Dark Mode">
            <span class="icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                width="24px" fill="#00000">
                <path
                  d="M484-80q-84 0-157.5-32t-128-86.5Q144-253 112-326.5T80-484q0-146 93-257.5T410-880q-18 99 11 193.5T521-521q71 71 165.5 100T880-410q-26 144-138 237T484-80Zm0-80q88 0 163-44t118-121q-86-8-163-43.5T464-465q-61-61-97-138t-43-163q-77 43-120.5 118.5T160-484q0 135 94.5 229.5T484-160Zm-20-305Z" />
              </svg></span>
          </button>
        </div>


      <div class="menu-links">
  <a href="#" class="menu-item">
    <span class="icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#D2B48C">
      <path d="M480-440q58 0 99-41t41-99q0-58-41-99t-99-41q-58 0-99 41t-41 99q0 58 41 99t99 41ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-46q-54-53-125.5-83.5T480-360q-83 0-154.5 30.5T200-246v46Z"/></svg></span>
    <span class="label">Profile</span>
  </a>

  <a href="Saved_Page.html" class="menu-item">
    <svg class="icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" fill="#FF0000">
      <path d="M480-388q51-47 82.5-77.5T611-518q17-22 23-38.5t6-35.5q0-36-26-62t-62-26q-21 0-40.5 8.5T480-648q-12-15-31-23.5t-41-8.5q-36 0-62 26t-26 62q0 19 5.5 35t22.5 38q17 22 48 52.5t84 78.5ZM200-120v-640q0-33 23.5-56.5T280-840h400q33 0 56.5 23.5T760-760v640L480-240 200-120Z"/>
    </svg>
    <span class="label">Saved</span>
  </a>

  <a href="#" class="menu-item">
    <span class="icon">
      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#3271a5">
      <path d="M170-228q-38-45-61-99T80-440h82q6 43 22 82.5t42 73.5l-56 56ZM80-520q8-59 30-113t60-99l56 56q-26 34-42 73.5T162-520H80ZM438-82q-59-6-112.5-28.5T226-170l56-58q35 26 74 43t82 23v80ZM284-732l-58-58q47-37 101-59.5T440-878v80q-43 6-82.5 23T284-732ZM518-82v-80q44-6 83.5-22.5T676-228l58 58q-47 38-101.5 60T518-82Zm160-650q-35-26-75-43t-83-23v-80q59 6 113.5 28.5T734-790l-56 58Zm112 504-56-56q26-34 42-73.5t22-82.5h82q-8 59-30 113t-60 99Zm8-292q-6-43-22-82.5T734-676l56-56q38 45 61 99t29 113h-82ZM441-280v-247L337-423l-56-57 200-200 200 200-57 56-103-103v247h-80Z"/></svg>
    </span>
    <span class="label">Upgrade Plan</span>
  </a>

  <a href="Sublet_Form.html" class="menu-item">
    <svg class="icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" fill="#ff7900">
      <path d="M160-200v-80h80v-280q0-83 50-147.5T420-792v-28q0-25 17.5-42.5T480-880q25 0 42.5 17.5T540-820v28q80 20 130 84.5T720-560v280h80v80H160Z"/>
    </svg>
    <span class="label">Notifications</span>
  </a>

  <a href="Setting_Page.html" class="menu-item">
    <svg class="icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" fill="#808080">
      <path
                        d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm112-260q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Z" />
    </svg>
    <span class="label">Settings</span>
  </a>

  <a href="Login_Page.html" class="menu-item">
    <svg class="icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" fill="#bebebe">
      <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v80h-80v-80H200v560h560v-80h80v80q0 33-23.5 56.5T760-120H200Zm480-160-56-56 103-104H360v-80h367L624-624l56-56 200 200-200 200Z"/>
    </svg>
    <span class="label">Log Out</span>
  </a>
</div>

    </div>
  </div>

  <!--  lower section-->

  <div class="header">
    <img src="Photos/Background_AFC_Photo.png" alt="Logo" class="header-image">
    <div class="header-text">
      <h1>Affordability Calculator</h1>
      <h2>How much can you afford?</h2>
    </div>
  </div>


  <div class="container">
    <div class="left-panel">
      <h3>How To Calculate Monthly Rent</h3>
      <p>Most landlords primarily look for tenants who spend less than 30% of their gross income on rent. To calculate
        the rent that's right for you, start by finding 30% of your pre-tax income. For example: If you make $30,000
        before taxes (or $2,500 per month), you should try to spend no more than $750 per month on rent.</p>

      <h3>What is the 50/30/20 rule?</h3>
      <ul>
        <li><strong>50%</strong> To Needs</li>
        <p>To ensure that essential expenses, like housing, food, transportation, utilities, insurance, and minimum debt
          payments, are covered. </p>
        <li><strong>30%</strong> To Wants</li>
        <p>To allow for discretionary spending on non-essential items and activities that enhance quality of life, such
          as entertainment, dining out, hobbies, and vacations.</p>
        <li><strong>20%</strong> To Savings</li>
        <p>To build financial security by allocating funds towards emergency savings, retirement contributions, debt
          reduction, and investments.</p>


      </ul>

    </div>

    <div class="right-panel calculator-panel">
      <h3>Calculate Rent</h3>
      <div class="form-box">
        <label>Monthly Income
          <input type="number" id="incomeInput" placeholder="e.g. 5000" required />
        </label>
      </div>

      <div class="form-box">
        <label>Rent Budget: </label>
        <span id="percentageDisplay" class="percentage-display">30%</span>

        <input type="range" id="percentageSlider" min="10" max="50" value="30" />
      </div>

      <p>Your estimated rent:</p>
      <h2 id="rentOutput" class="rent-budget">$0 / Month</h2>

      <canvas id="budgetChart" width="100" height="100"></canvas>
    </div>
  </div>
  </div>

  <style>

    .header {
      position: relative;
      width: 100%;
      height: 300px;
      /* Adjust height as needed */
      margin-top: 0;
    }

    .header-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* Ensures the image covers the area */
      display: block;
    }

    .header-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: black;
      background-color: rgba(255, 255, 255, 0.392);
      border-radius: 10px 10px 10px 10px;

    }

    .header-text h1 {
      font-size: 40px;
      margin: 0;
    }

    .header-text h2 {
      font-weight: bolder;
      font-size: 24px;
      margin-top: 10px;
      z-index: 1000;
    }

    .header-text h1,
    .header-text h2 {
      background: none;
      background-color: transparent;
    }
    .top-content {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 30pt;
      font-weight: bold;
    }

    .logo {
      gap: 10px;
      position: relative;

      height: 70px;
    }

    .container {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;

    }

    h1 {
      display: flex;
      justify-content: center;
      /* horizontally center content */
      align-items: center;
      /* vertically center if there's height */
      background-color: white;
      /* optional: for visibility */
    }

    h2 {
      display: flex;
      justify-content: center;
      /* horizontally center content */
      align-items: center;
      /* vertically center if there's height */
      background-color: white;
      /* optional: for visibility */
    }

    .left-panel {
      flex: 1;
      min-width: 300px;
      background: #f9f9f9;
      padding: 20px;
      border-radius: 10px;
    }

    .rangeslider {
      background: linear-gradient(to right, #1abc3a 30%, #fbca02 50%, #b91907 80%);
      height: 14px;
      border-radius: 10px;
    }

    .calculator-panel input[type="number"],
    .calculator-panel input[type="text"] {
      width: 20%;
      padding: 10px;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      margin-bottom: 20px;
    }

    .calculator-panel {
      flex: 1;
      min-width: 200px;
      background-color: #fff;
      padding: 25px 20px;
      border-top: 5px solid var(--menu-color);
      border-radius: 6px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .rangeslider__handle {
      width: 28px;
      height: 28px;
      background: #FFF;
      top: -7px;
      border-radius: 50%;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.4);
      position: absolute;
      transition: background 0.2s ease;
    }

    .rangeslider__fill {
      background: transparent;
    }

    .budget-breakdown li {
      margin-bottom: 6px;
      font-size: 0.95rem;
    }

    h3 {
      font-size: 1.8em;
      margin-top: 20px;
      color: #444;
    }

    .percentage-display {
      font-weight: bold;
    }

    .budget-breakdown {
      margin-top: 20px;
      text-align: left;
    }

    .chart-section h4 {
      margin-bottom: 10px;
      font-weight: 600;
    }
  </style>


<!-- Footer -->


<style>
    .main {
      grid-area: main;
      padding: 10rem;
    }

    .footer {
      grid-area: footer;
      z-index: 1;
      --footer-background:var(--menu-color);
      display: grid;
      position: relative;
      min-height: 5rem;
    }

    .footer .bubbles {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1rem;
      background: var(--footer-background);
      filter: url("#blob");
    }

    .footer .bubbles .bubble {
      position: absolute;
      left: var(--position, 50%);
      background: var(--footer-background);
      border-radius: 100%;
      animation: bubble-size var(--time, 4s) ease-in infinite var(--delay, 0s),
                 bubble-move var(--time, 4s) ease-in infinite var(--delay, 0s);
      transform: translate(-50%, 100%);
    }

    .footer .content {
      z-index: 2;
      display: grid;
      grid-template-columns: 1fr auto;
      grid-gap: 2rem;
      padding: 2rem;
      background: var(--footer-background);
    }

    .footer .content a,
    .footer .content p {
      color: #F5F7FA;
      text-decoration: none;
    }

    .footer .content b {
      color: white;
    }

    .footer .content p {
      margin: 0;
      font-size: 0.75rem;
    }

    .footer .content > div {
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .footer .content > div > div {
      margin: 0.25rem 0;
    }

    .footer .content > div > div > * {
      margin-right: 0.5rem;
    }

    .footer .content .image {
      align-self: center;
      width: 4rem;
      height: 4rem;
      margin: 0.25rem 0;
      background-size: cover;
      background-position: center;
    }

    @keyframes bubble-size {
      0%, 75% {
        width: var(--size, 1rem);
        height: var(--size, 2rem);
      }
      100% {
        width: 0rem;
        height: 0rem;
      }
    }

    @keyframes bubble-move {
      0% {
        bottom: -2rem;
      }
      100% {
        bottom: var(--distance, 10rem);
      }
    }
  </style>
</head>
<body>
  <main class="main">
    
  </main>

  <footer class="footer">
    <div class="bubbles" id="bubbles-container"></div>
    <div class="content">
      <div>
        <div>
          <b>Student APTs</b>
          <a href="Home_Page.html">Home</a>
          <a href="Saved_Page.html">Saved</a>
          <a href="Rent_Calculations.html">Rent Calculator</a>
          <a href="Setting_Page.html">Settings</a>
          <a href="Login_Page.html">Logout</a>
          
        </div>
        <div>
          <b>Producer</b> <br>
          <a href="#">Isabella Crowe @ WIT</a>
  
        </div>
      </div>
      <div>
        <a class="image"
           href="https://codepen.io/z-"
           target="_blank"
           style="background-image: url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/199011/happy.svg');"
        ></a>

      </div>
    </div>
  </footer>

  <svg style="position: fixed; top: 100vh;">
    <defs>
      <filter id="blob">
        <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" />
        <feColorMatrix
          in="blur"
          mode="matrix"
          values="1 0 0 0 0  
                  0 1 0 0 0  
                  0 0 1 0 0  
                  0 0 0 19 -9"
          result="blob"
        />
      </filter>
    </defs>
  </svg>

  <script>
    const container = document.getElementById('bubbles-container');
    for (let i = 0; i < 128; i++) {
      const bubble = document.createElement('div');
      bubble.className = 'bubble';
      bubble.style.setProperty('--size', `${2 + Math.random() * 4}rem`);
      bubble.style.setProperty('--distance', `${6 + Math.random() * 4}rem`);
      bubble.style.setProperty('--position', `${-5 + Math.random() * 110}%`);
      bubble.style.setProperty('--time', `${2 + Math.random() * 2}s`);
      bubble.style.setProperty('--delay', `${-1 * (2 + Math.random() * 2)}s`);
      container.appendChild(bubble);
    }
  </script>



  <!-- Visualization Logic -->
      <script>
      // Menu Toggle
      document.addEventListener("DOMContentLoaded", function () {
        const menuToggle = document.getElementById("menuToggle");
        const menu = document.querySelector(".Menu");
        const body = document.body;

        menuToggle.addEventListener("change", function () {
          if (menuToggle.checked) {
            menu.style.transform = "translateX(0)";
            body.classList.add("menu-open");
          } else {
            menu.style.transform = "translateX(-300px)";
            body.classList.remove("menu-open");
          }
        });

        // Load user info from localStorage
        const userData = localStorage.getItem("user");
        if (userData) {
          const user = JSON.parse(userData);
          if (user.fullName) document.getElementById("profileName").textContent = user.fullName;
          if (user.email) document.getElementById("profileEmail").textContent = user.email;
        }
      });
    </script>

    <script>
      // Profile Dropdown
      const toggle = document.getElementById("profileToggle");
      const profileMenu = document.getElementById("profileMenu");

      toggle.addEventListener("click", () => {
        profileMenu.style.display = profileMenu.style.display === "block" ? "none" : "block";
      });

      window.addEventListener("click", (e) => {
        if (!toggle.contains(e.target) && !profileMenu.contains(e.target)) {
          profileMenu.style.display = "none";
        }
      });
    </script>

    <script>
      // Theme Toggle
      document.addEventListener('DOMContentLoaded', () => {
        const themeButtons = document.querySelectorAll('.theme-btn');
        const savedTheme = localStorage.getItem('theme');

        if (savedTheme === 'dark') {
          document.body.classList.add('dark-mode');
          setLogo(true);
          setActiveTheme('dark');
        }

        themeButtons.forEach(button => {
          button.addEventListener('click', () => {
            const theme = button.dataset.theme;
            document.body.classList.toggle('dark-mode', theme === 'dark');
            localStorage.setItem('theme', theme);
            setLogo(theme === 'dark');
            setActiveTheme(theme);
          });
        });

        function setActiveTheme(theme) {
          themeButtons.forEach(btn => {
            btn.classList.toggle('active', btn.dataset.theme === theme);
          });
        }

        function setLogo(isDark) {
          const logo = document.getElementById('siteLogo');
          logo.style.backgroundImage = isDark
            ? "url('Photos/Boston_Logo_White.png')"
            : "url('Photos/Boston_Logo.png')";
        }
      });
    </script>

    <script>
      // Notification Bell
      document.addEventListener('DOMContentLoaded', () => {
        const notificationCount = 0; // Set dynamic value here
        const bell = document.querySelector('.notification-bell');
        const countEl = document.querySelector('.notification-count');

        if (notificationCount > 0) {
          bell.classList.add('animate-bell');
          countEl.textContent = notificationCount;
          countEl.style.display = 'block';
        } else {
          bell.classList.remove('animate-bell');
          countEl.textContent = '';
          countEl.style.display = 'none';
        }
      });
    </script>

    <script>
      // Affordability Chart Logic
      document.addEventListener("DOMContentLoaded", () => {
        const incomeInput = document.getElementById("incomeInput");
        const percentageSlider = document.getElementById("percentageSlider");
        const percentageDisplay = document.getElementById("percentageDisplay");
        const rentOutput = document.getElementById("rentOutput");
        const ctx = document.getElementById("budgetChart").getContext("2d");

        const chartData = {
          labels: ['Needs (50%)', 'Wants (30%)', 'Savings (20%)'],
          datasets: [{
            data: [0, 0, 0],
            backgroundColor: ['#3271a5', '#70b5ee', '#767a7c']
          }]
        };

        const budgetChart = new Chart(ctx, {
          type: 'pie',
          data: chartData,
          options: {
            responsive: true,
            plugins: {
              legend: { position: 'bottom' },
              title: { display: true, text: 'Budget Breakdown' }
            }
          }
        });

        function updateVisualization() {
          const income = parseFloat(incomeInput.value);
          const percentage = parseInt(percentageSlider.value);
          percentageDisplay.textContent = `${percentage}%`;

          if (!isNaN(income)) {
            const rent = Math.round((income * percentage) / 100);
            rentOutput.textContent = `$${rent.toLocaleString()} / Month`;

            chartData.datasets[0].data = [
              Math.round(income * 0.5),
              Math.round(income * 0.3),
              Math.round(income * 0.2)
            ];
          } else {
            rentOutput.textContent = `$0 / Month`;
            chartData.datasets[0].data = [0, 0, 0];
          }
          budgetChart.update();
        }

        incomeInput.addEventListener("input", updateVisualization);
        percentageSlider.addEventListener("input", updateVisualization);

        // Initialize rangeslider
        $(function () {
          const $slider = $('#percentageSlider');

          $slider.rangeslider({
            polyfill: false,
            onInit: function () {
              const value = $slider.val();
              const color = getGradientColor(value);
              $('.rangeslider__handle').css('background', color);
              $('#percentageDisplay').text(`${value}%`);
              updateVisualization();
            },
            onSlide: function (pos, value) {
              const color = getGradientColor(value);
              $('.rangeslider__handle').css('background', color);
              $('#percentageDisplay').text(`${value}%`);
              updateVisualization();
            }
          });

          $slider.on('input', function () {
            const value = this.value;
            const color = getGradientColor(value);
            $('.rangeslider__handle').css('background', color);
            $('#percentageDisplay').text(`${value}%`);
            updateVisualization();
          });
        });

        function hexToRgb(hex) {
          const bigint = parseInt(hex.replace('#', ''), 16);
          return { r: (bigint >> 16) & 255, g: (bigint >> 8) & 255, b: bigint & 255 };
        }

        function interpolateColor(color1, color2, factor) {
          const c1 = hexToRgb(color1);
          const c2 = hexToRgb(color2);
          return `rgb(
      ${Math.round(c1.r + (c2.r - c1.r) * factor)},
      ${Math.round(c1.g + (c2.g - c1.g) * factor)},
      ${Math.round(c1.b + (c2.b - c1.b) * factor)}
    )`;
        }

        function getGradientColor(value) {
          if (value <= 30) {
            return interpolateColor('#1abc3a', '#fbca02', (value - 10) / 20);
          } else {
            return interpolateColor('#fbca02', '#b91907', (value - 30) / 20);
          }
        }
      });
    </script>




</body>

</html>